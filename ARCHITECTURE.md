# K-IFRS 1019 DBO Validation System - Architecture

## ğŸ“ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ ì„¤ëª…

### í•µì‹¬ ì„¤ê³„ ì›ì¹™

1. **AIì™€ ê²€ì¦ ì—”ì§„ì˜ ì—„ê²©í•œ ë¶„ë¦¬**
   - AI: ìì—°ì–´ ê·œì¹™ í•´ì„ë§Œ ìˆ˜í–‰
   - Rule Engine: ê²°ì •ë¡ ì  ê²€ì¦ë§Œ ìˆ˜í–‰
   - ëª…í™•í•œ ì±…ì„ ë¶„ë¦¬ë¡œ ê°ì‚¬ ê°€ëŠ¥ì„± í™•ë³´

2. **ê²°ì •ë¡ ì  ì‹¤í–‰ ë³´ì¥**
   - ë™ì¼í•œ ì…ë ¥ â†’ ë™ì¼í•œ ì¶œë ¥
   - AIì˜ ë¹„ê²°ì •ì„±ì€ ê·œì¹™ í•´ì„ ë‹¨ê³„ì—ë§Œ ì¡´ì¬
   - ì‹¤ì œ ê²€ì¦ì€ 100% ì¬í˜„ ê°€ëŠ¥

3. **ê°ì‚¬ ì¶”ì  ê°€ëŠ¥ì„±**
   - ëª¨ë“  ì˜¤ë¥˜ì— ì¶œì²˜ ëª…ì‹œ
   - AI í•´ì„ ê·¼ê±° ì œê³µ
   - K-IFRS 1019 ì°¸ì¡° ìë™ ì—°ê²°

4. **Human-in-the-Loop**
   - AI íŒë‹¨ì€ "ì œì•ˆ"
   - ì¶©ëŒ ë°œê²¬ ì‹œ ì‚¬ìš©ìì—ê²Œ ì—ìŠ¤ì»¬ë ˆì´ì…˜
   - ìµœì¢… ê²°ì •ê¶Œì€ í•­ìƒ ì‚¬ìš©ì

---

## ğŸ”„ ë°ì´í„° íë¦„ ìƒì„¸

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 1: File Upload                                              â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚                                                                   â”‚
â”‚  User â†’ Frontend â†’ POST /validate                                â”‚
â”‚                                                                   â”‚
â”‚  Files:                                                           â”‚
â”‚  â€¢ Excel A: employee_id, birth_date, hire_date, gender, ...      â”‚
â”‚  â€¢ Excel B: field_name, rule_text (natural language)             â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 2: Parse Excel Files                                        â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚                                                                   â”‚
â”‚  main.py:                                                         â”‚
â”‚  â€¢ Read Excel A â†’ pandas DataFrame                                â”‚
â”‚  â€¢ Read Excel B â†’ List[Dict] (natural language rules)            â”‚
â”‚                                                                   â”‚
â”‚  Example natural language rules:                                  â”‚
â”‚  [                                                                â”‚
â”‚    {                                                              â”‚
â”‚      "field": "employee_id",                                      â”‚
â”‚      "rule_text": "ì‚¬ë²ˆ: ê³µë°± ì—†ìŒ, ì¤‘ë³µ ì—†ìŒ"                    â”‚
â”‚    },                                                             â”‚
â”‚    {                                                              â”‚
â”‚      "field": "birth_date",                                       â”‚
â”‚      "rule_text": "ìƒë…„ì›”ì¼ì€ YYYYMMDD í˜•ì‹"                     â”‚
â”‚    }                                                              â”‚
â”‚  ]                                                                â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 3: AI Interpretation (ai_layer.py)                          â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚                                                                   â”‚
â”‚  AI Responsibilities:                                             â”‚
â”‚  âœ“ Convert natural language â†’ structured JSON                    â”‚
â”‚  âœ“ Detect conflicts between rules                                â”‚
â”‚  âœ“ Detect K-IFRS 1019 mismatches                                 â”‚
â”‚  âœ“ Provide reasoning and confidence scores                       â”‚
â”‚                                                                   â”‚
â”‚  Input: List[Dict] (natural language)                             â”‚
â”‚  â†“                                                                â”‚
â”‚  Claude API Call (Sonnet 4)                                       â”‚
â”‚  â†“                                                                â”‚
â”‚  Output: AIInterpretationResponse                                 â”‚
â”‚  {                                                                â”‚
â”‚    "rules": [ValidationRule],  â† Structured rules                â”‚
â”‚    "conflicts": [RuleConflict], â† Detected conflicts             â”‚
â”‚    "ai_summary": str           â† AI's reasoning                  â”‚
â”‚  }                                                                â”‚
â”‚                                                                   â”‚
â”‚  Example ValidationRule:                                          â”‚
â”‚  {                                                                â”‚
â”‚    "rule_id": "RULE_001",                                         â”‚
â”‚    "field_name": "employee_id",                                   â”‚
â”‚    "rule_type": "required",                                       â”‚
â”‚    "parameters": {},                                              â”‚
â”‚    "error_message_template": "ì‚¬ë²ˆì´ ë¹„ì–´ìˆìŠµë‹ˆë‹¤.",              â”‚
â”‚    "source": {                                                    â”‚
â”‚      "original_text": "ì‚¬ë²ˆ: ê³µë°± ì—†ìŒ, ì¤‘ë³µ ì—†ìŒ",              â”‚
â”‚      "sheet_name": "validation_rules",                            â”‚
â”‚      "row_number": 2                                              â”‚
â”‚    },                                                             â”‚
â”‚    "ai_interpretation_summary": "ì‚¬ë²ˆ í•„ë“œëŠ” í•„ìˆ˜",               â”‚
â”‚    "confidence_score": 0.98                                       â”‚
â”‚  }                                                                â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 4: Rule Engine Execution (rule_engine.py)                   â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚                                                                   â”‚
â”‚  ğŸš« AIëŠ” ì´ ë‹¨ê³„ì— ê´€ì—¬í•˜ì§€ ì•ŠìŒ                                 â”‚
â”‚                                                                   â”‚
â”‚  Input:                                                           â”‚
â”‚  â€¢ pandas DataFrame (employee data)                               â”‚
â”‚  â€¢ List[ValidationRule] (from AI)                                â”‚
â”‚                                                                   â”‚
â”‚  Process:                                                         â”‚
â”‚  for each rule in rules:                                          â”‚
â”‚    if rule.rule_type == "required":                               â”‚
â”‚      â†’ check for null/empty values                                â”‚
â”‚    elif rule.rule_type == "no_duplicates":                        â”‚
â”‚      â†’ check for duplicates                                       â”‚
â”‚    elif rule.rule_type == "format":                               â”‚
â”‚      â†’ apply regex or format check                                â”‚
â”‚    elif rule.rule_type == "range":                                â”‚
â”‚      â†’ check min/max boundaries                                   â”‚
â”‚    elif rule.rule_type == "date_logic":                           â”‚
â”‚      â†’ compare dates between fields                               â”‚
â”‚    ...                                                            â”‚
â”‚                                                                   â”‚
â”‚  Output: List[ValidationError]                                    â”‚
â”‚  [                                                                â”‚
â”‚    {                                                              â”‚
â”‚      "row": 15,                                                   â”‚
â”‚      "column": "birth_date",                                      â”‚
â”‚      "rule_id": "RULE_003",                                       â”‚
â”‚      "message": "ìƒë…„ì›”ì¼ í˜•ì‹ì´ ì˜ëª»ë˜ì—ˆìŠµë‹ˆë‹¤.",                â”‚
â”‚      "actual_value": "1985-03-15",                                â”‚
â”‚      "expected": "YYYYMMDD",                                      â”‚
â”‚      "source_rule": "ìƒë…„ì›”ì¼ì€ YYYYMMDD í˜•ì‹ìœ¼ë¡œ ì…ë ¥"          â”‚
â”‚    },                                                             â”‚
â”‚    ...                                                            â”‚
â”‚  ]                                                                â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 5: Response Generation (main.py)                            â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚                                                                   â”‚
â”‚  Combine:                                                         â”‚
â”‚  â€¢ Validation errors (from Rule Engine)                           â”‚
â”‚  â€¢ Rule conflicts (from AI Layer)                                 â”‚
â”‚  â€¢ Summary statistics                                             â”‚
â”‚  â€¢ Applied rules (for audit trail)                                â”‚
â”‚                                                                   â”‚
â”‚  Return: ValidationResponse                                       â”‚
â”‚  {                                                                â”‚
â”‚    "validation_status": "PASS" | "FAIL",                          â”‚
â”‚    "summary": {...},                                              â”‚
â”‚    "errors": [...],                                               â”‚
â”‚    "conflicts": [...],                                            â”‚
â”‚    "rules_applied": [...],                                        â”‚
â”‚    "metadata": {...}                                              â”‚
â”‚  }                                                                â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 6: Frontend Display                                         â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚                                                                   â”‚
â”‚  Mobile-First UI:                                                 â”‚
â”‚  â€¢ Overall status badge (PASS/FAIL)                               â”‚
â”‚  â€¢ Summary statistics (total rows, error rows, ...)               â”‚
â”‚  â€¢ Error list with details                                        â”‚
â”‚  â€¢ Conflict warnings (if any)                                     â”‚
â”‚                                                                   â”‚
â”‚  User Actions:                                                    â”‚
â”‚  â€¢ Review errors                                                  â”‚
â”‚  â€¢ Review conflicts                                               â”‚
â”‚  â€¢ Decide on K-IFRS 1019 conflicts                                â”‚
â”‚  â€¢ Re-upload corrected files                                      â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ” ë³´ì•ˆ ë° ì±…ì„ ë¶„ë¦¬

### AI Layer (ê²©ë¦¬)

```python
class AIRuleInterpreter:
    """
    ğŸ¤– AIì˜ ì—­í• :
    - ìì—°ì–´ ê·œì¹™ í•´ì„
    - JSON êµ¬ì¡°í™”
    - ì¶©ëŒ ê°ì§€
    
    ğŸš« AIê°€ í•˜ì§€ ì•ŠëŠ” ê²ƒ:
    - ë°ì´í„° ê²€ì¦
    - íšŒê³„ íŒë‹¨
    - ë¹„ê²°ì •ë¡ ì  ì‹¤í–‰
    """
```

**ì…ë ¥**:
```json
[
  {
    "field": "birth_date",
    "rule_text": "ìƒë…„ì›”ì¼ì€ YYYYMMDD í˜•ì‹"
  }
]
```

**ì¶œë ¥**:
```json
{
  "rule_id": "RULE_003",
  "field_name": "birth_date",
  "rule_type": "format",
  "parameters": {
    "format": "YYYYMMDD",
    "regex": "^[0-9]{8}$"
  },
  "error_message_template": "ìƒë…„ì›”ì¼ í˜•ì‹ì´ ì˜ëª»ë˜ì—ˆìŠµë‹ˆë‹¤.",
  "ai_interpretation_summary": "ìƒë…„ì›”ì¼ì€ 8ìë¦¬ ìˆ«ìë¡œ YYYYMMDD í˜•ì‹ì„ ë”°ë¼ì•¼ í•¨",
  "confidence_score": 0.99
}
```

---

### Rule Engine (ê²°ì •ë¡ ì )

```python
class RuleEngine:
    """
    âš™ï¸  ì—”ì§„ì˜ ì—­í• :
    - AIê°€ ë§Œë“  ê·œì¹™ ì‹¤í–‰
    - 100% ê²°ì •ë¡ ì 
    - ê°ì‚¬ ì¶”ì  ê°€ëŠ¥
    
    âœ“ ë™ì¼ ì…ë ¥ â†’ ë™ì¼ ì¶œë ¥ ë³´ì¥
    """
```

**ì…ë ¥**:
```json
{
  "data": DataFrame,
  "rule": {
    "rule_type": "format",
    "parameters": {"regex": "^[0-9]{8}$"}
  }
}
```

**ì‹¤í–‰**:
```python
for idx, value in enumerate(data["birth_date"]):
    if not re.match(r'^[0-9]{8}$', str(value)):
        errors.append(ValidationError(...))
```

**ì¶œë ¥**:
```json
[
  {
    "row": 15,
    "column": "birth_date",
    "rule_id": "RULE_003",
    "message": "ìƒë…„ì›”ì¼ í˜•ì‹ì´ ì˜ëª»ë˜ì—ˆìŠµë‹ˆë‹¤.",
    "actual_value": "1985-03-15"
  }
]
```

---

## ğŸ¯ K-IFRS 1019 ì¶©ëŒ ê°ì§€

### ì˜ˆì‹œ 1: ë‚˜ì´ ì œí•œ ì¶©ëŒ

**Excel B ê·œì¹™**:
```
"60ì„¸ ì´ìƒì€ ì œì™¸"
```

**AI ê°ì§€**:
```json
{
  "rule_id": "RULE_008",
  "conflict_type": "kifrs_mismatch",
  "description": "K-IFRS 1019ëŠ” ëª¨ë“  ì¬ì§ ì¤‘ì¸ ì„ì§ì›ì„ í¬í•¨í•´ì•¼ í•¨",
  "kifrs_reference": "K-IFRS 1019 ë¬¸ë‹¨ 28-31",
  "recommendation": "ê·œì¹™ì„ ì œê±°í•˜ê±°ë‚˜ íšŒê³„ë²•ì¸ê³¼ í˜‘ì˜",
  "severity": "high"
}
```

**ì‚¬ìš©ì ì¡°ì¹˜**:
- ê·œì¹™ ì œê±°
- íšŒê³„ë²•ì¸ í˜‘ì˜
- íŠ¹ì • ì¡°ê±´ìœ¼ë¡œ ë³€ê²½ (ì˜ˆ: ê³„ì•½ì§ ì œì™¸)

---

### ì˜ˆì‹œ 2: ì• ë§¤í•œ í‘œí˜„

**Excel B ê·œì¹™**:
```
"ì ì ˆí•œ ê¸‰ì—¬ ë²”ìœ„"
```

**AI ê°ì§€**:
```json
{
  "rule_id": "RULE_012",
  "conflict_type": "ambiguous_interpretation",
  "description": "'ì ì ˆí•œ'ì´ ì• ë§¤í•©ë‹ˆë‹¤. êµ¬ì²´ì ì¸ ê°’ì´ í•„ìš”í•©ë‹ˆë‹¤.",
  "recommendation": "êµ¬ì²´ì ì¸ ìµœì†Œ/ìµœëŒ€ê°’ì„ ëª…ì‹œí•˜ì„¸ìš” (ì˜ˆ: 2ì²œë§Œì›~2ì–µì›)",
  "severity": "medium"
}
```

---

## ğŸ“Š ëª¨ë°”ì¼ ìš°ì„  UI ì„¤ê³„

### ë°˜ì‘í˜• ë ˆì´ì•„ì›ƒ

```css
/* ëª¨ë°”ì¼ (ê¸°ë³¸) */
.container {
  max-width: 600px;
  padding: 16px;
}

/* ë°ìŠ¤í¬í†± */
@media (min-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(4, 1fr);
  }
}
```

### í„°ì¹˜ ìµœì í™”

```css
/* í„°ì¹˜ ì˜ì—­ í™•ëŒ€ */
.validate-btn {
  padding: 16px;
  font-size: 16px;
}

/* í„°ì¹˜ í”¼ë“œë°± */
.validate-btn:active {
  transform: scale(0.98);
}
```

---

## ğŸ”„ í™•ì¥ ê°€ëŠ¥ì„±

### ìƒˆë¡œìš´ ê·œì¹™ íƒ€ì… ì¶”ê°€

1. **models.py**ì— íƒ€ì… ì¶”ê°€:
```python
rule_type: Literal[
    "required",
    "no_duplicates",
    "format",
    "range",
    "date_logic",
    "cross_field",
    "custom",
    "new_type"  # â† ì¶”ê°€
]
```

2. **rule_engine.py**ì— í•¸ë“¤ëŸ¬ ì¶”ê°€:
```python
def _validate_new_type(self, data, rule):
    # ìƒˆë¡œìš´ ê²€ì¦ ë¡œì§
    pass
```

3. **ai_layer.py** í”„ë¡¬í”„íŠ¸ì— ì„¤ëª… ì¶”ê°€

---

## ğŸ§ª í…ŒìŠ¤íŠ¸ ì „ëµ

### 1. AI ë ˆì´ì–´ í…ŒìŠ¤íŠ¸
- ë‹¤ì–‘í•œ ìì—°ì–´ í‘œí˜„ í…ŒìŠ¤íŠ¸
- ì¶©ëŒ ê°ì§€ ì •í™•ë„ í…ŒìŠ¤íŠ¸
- ì‹ ë¢°ë„ ì ìˆ˜ ê²€ì¦

### 2. Rule Engine í…ŒìŠ¤íŠ¸
- ê° ê·œì¹™ íƒ€ì…ë³„ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
- Edge case í…ŒìŠ¤íŠ¸ (null, ë¹ˆ ë¬¸ìì—´, íŠ¹ìˆ˜ë¬¸ì)
- ëŒ€ìš©ëŸ‰ ë°ì´í„° ì„±ëŠ¥ í…ŒìŠ¤íŠ¸

### 3. í†µí•© í…ŒìŠ¤íŠ¸
- ì „ì²´ ì›Œí¬í”Œë¡œìš° í…ŒìŠ¤íŠ¸
- ì‹¤ì œ ë³´í—˜ê³„ë¦¬ ë°ì´í„°ë¡œ í…ŒìŠ¤íŠ¸
- íšŒê³„ë²•ì¸ í”¼ë“œë°± ë°˜ì˜

---

## ğŸ“ˆ ì„±ëŠ¥ ê³ ë ¤ì‚¬í•­

### ëŒ€ìš©ëŸ‰ ë°ì´í„° ì²˜ë¦¬

```python
# ë°°ì¹˜ ì²˜ë¦¬
for batch in pd.read_excel(file, chunksize=1000):
    errors.extend(engine.validate(batch, rules))
```

### AI API í˜¸ì¶œ ìµœì í™”

```python
# ê·œì¹™ ìºì‹±
cache = {}
if rules_hash in cache:
    return cache[rules_hash]
```

---

## ğŸ” ë³´ì•ˆ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] HTTPS ì‚¬ìš©
- [ ] íŒŒì¼ ì—…ë¡œë“œ í¬ê¸° ì œí•œ
- [ ] íŒŒì¼ íƒ€ì… ê²€ì¦
- [ ] SQL Injection ë°©ì§€ (pandas ì‚¬ìš©ìœ¼ë¡œ ê¸°ë³¸ ë°©ì–´)
- [ ] ë¯¼ê° ì •ë³´ ë¡œê¹… ê¸ˆì§€
- [ ] API Rate Limiting

---

## ğŸ“ ì—ëŸ¬ í•¸ë“¤ë§

```python
try:
    result = validate_data(df, rules)
except FileNotFoundError:
    # íŒŒì¼ ì—†ìŒ
except pd.errors.ParserError:
    # Excel íŒŒì‹± ì‹¤íŒ¨
except ValidationError:
    # ê²€ì¦ ì˜¤ë¥˜
except AIInterpretationError:
    # AI í•´ì„ ì‹¤íŒ¨
```

---

## ğŸ“ ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤

1. **ê·œì¹™ ì‘ì„±**:
   - ëª…í™•í•˜ê³  êµ¬ì²´ì ìœ¼ë¡œ
   - ì˜ˆì‹œ í¬í•¨
   - K-IFRS 1019 ì¡°í•­ ì°¸ì¡°

2. **ë°ì´í„° ì¤€ë¹„**:
   - ì¼ê´€ëœ í˜•ì‹ ì‚¬ìš©
   - í—¤ë” ëª…í™•íˆ
   - ìƒ˜í”Œ ë°ì´í„°ë¡œ ë¨¼ì € í…ŒìŠ¤íŠ¸

3. **ê²€ì¦ ê²°ê³¼ ê²€í† **:
   - ì¶©ëŒ ìš°ì„  í™•ì¸
   - ë†’ì€ ì‹¬ê°ë„ë¶€í„° ì²˜ë¦¬
   - íšŒê³„ë²•ì¸ê³¼ í˜‘ì˜

---

ì´ ì•„í‚¤í…ì²˜ëŠ” ê°ì‚¬ ê°€ëŠ¥ì„±, ê²°ì •ë¡ ì  ì‹¤í–‰, ëª…í™•í•œ ì±…ì„ ë¶„ë¦¬ë¥¼ í•µì‹¬ ì›ì¹™ìœ¼ë¡œ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤.
