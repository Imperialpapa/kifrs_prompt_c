# K-IFRS 1019 DBO Data Validation System

> AI-Powered, Audit-Ready Data Validation for Defined Benefit Obligations

## ğŸ¯ í”„ë¡œì íŠ¸ ê°œìš”

í•œêµ­ ë³´í—˜ê³„ë¦¬ë²•ì¸ë“¤ì´ K-IFRS 1019 (í‡´ì§ê¸‰ì—¬) ê¸°ì¤€ì— ë”°ë¼ í™•ì •ê¸‰ì—¬ì±„ë¬´(DBO)ë¥¼ ê³„ì‚°í•  ë•Œ, ì§ì› ë°ì´í„°ì˜ ì •í•©ì„±ì„ ê²€ì¦í•˜ëŠ” ì›¹ ê¸°ë°˜ ì‹œìŠ¤í…œì…ë‹ˆë‹¤.

### í•µì‹¬ íŠ¹ì§•

âœ… **AI ê·œì¹™ í•´ì„**: ìì—°ì–´ë¡œ ì‘ì„±ëœ ê²€ì¦ ê·œì¹™ì„ AIê°€ êµ¬ì¡°í™”ëœ JSONìœ¼ë¡œ ë³€í™˜  
âœ… **ê²°ì •ë¡ ì  ì‹¤í–‰**: AI í•´ì„ í›„ì—ëŠ” 100% ê²°ì •ë¡ ì  ê²€ì¦ ì—”ì§„ì´ ì‹¤í–‰  
âœ… **ê°ì‚¬ ì¶”ì **: ëª¨ë“  ì˜¤ë¥˜ì— ì¶œì²˜ì™€ ê·¼ê±°ë¥¼ ëª…ì‹œ  
âœ… **K-IFRS 1019 ì¤€ìˆ˜**: íšŒê³„ê¸°ì¤€ê³¼ì˜ ì¶©ëŒì„ ìë™ ê°ì§€  
âœ… **ëª¨ë°”ì¼ ìš°ì„ **: ìŠ¤ë§ˆíŠ¸í°ì—ì„œë„ í¸ë¦¬í•˜ê²Œ ì‚¬ìš© ê°€ëŠ¥

---

## ğŸ—ï¸ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ğŸ“± Mobile-First Web UI                   â”‚
â”‚            (HTML/CSS/JavaScript - Responsive)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â”‚ HTTP POST /validate
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     ğŸŒ FastAPI Backend                      â”‚
â”‚                    (main.py - REST API)                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚                              â”‚
              â–¼                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ğŸ¤– AI Layer (ê²©ë¦¬)    â”‚   â”‚  âš™ï¸  Rule Engine (ê²°ì •ë¡ )  â”‚
â”‚    (ai_layer.py)         â”‚   â”‚   (rule_engine.py)           â”‚
â”‚                          â”‚   â”‚                              â”‚
â”‚ â€¢ ìì—°ì–´ ê·œì¹™ í•´ì„       â”‚   â”‚ â€¢ AI ê·œì¹™ ì‹¤í–‰              â”‚
â”‚ â€¢ JSON êµ¬ì¡°í™”            â”‚   â”‚ â€¢ 100% ê²°ì •ë¡ ì              â”‚
â”‚ â€¢ ì¶©ëŒ ê°ì§€              â”‚   â”‚ â€¢ ë°ì´í„° ê²€ì¦               â”‚
â”‚ â€¢ K-IFRS 1019 ë¹„êµ       â”‚   â”‚ â€¢ ì˜¤ë¥˜ ìˆ˜ì§‘                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚                              â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â–¼
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚  ğŸ“Š Data Models  â”‚
                   â”‚   (models.py)    â”‚
                   â”‚                  â”‚
                   â”‚ â€¢ ValidationRule â”‚
                   â”‚ â€¢ ValidationErrorâ”‚
                   â”‚ â€¢ RuleConflict   â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ë°ì´í„° íë¦„

```
1. ì‚¬ìš©ì ì—…ë¡œë“œ
   â”œâ”€ Excel A: ì§ì› ë°ì´í„° (employee_id, birth_date, hire_date, ...)
   â””â”€ Excel B: ìì—°ì–´ ê²€ì¦ ê·œì¹™ ("ì‚¬ë²ˆì€ ì¤‘ë³µ ì—†ìŒ", "ìƒë…„ì›”ì¼ì€ YYYYMMDD", ...)

2. AI ë ˆì´ì–´ (ai_layer.py)
   â”œâ”€ ìì—°ì–´ ê·œì¹™ ì½ê¸°
   â”œâ”€ Claude API í˜¸ì¶œ (Sonnet 4)
   â”œâ”€ êµ¬ì¡°í™”ëœ Rule JSON ìƒì„±
   â”‚  â””â”€ {rule_id, field_name, rule_type, parameters, ...}
   â””â”€ K-IFRS 1019 ì¶©ëŒ ê°ì§€

3. Rule Engine (rule_engine.py)
   â”œâ”€ AIê°€ ìƒì„±í•œ ê·œì¹™ ë¡œë“œ
   â”œâ”€ ê²°ì •ë¡ ì  ê²€ì¦ ì‹¤í–‰
   â”‚  â”œâ”€ required: í•„ìˆ˜ í•„ë“œ ì²´í¬
   â”‚  â”œâ”€ no_duplicates: ì¤‘ë³µ ì²´í¬
   â”‚  â”œâ”€ format: í˜•ì‹ ê²€ì¦ (regex)
   â”‚  â”œâ”€ range: ë²”ìœ„ ê²€ì¦
   â”‚  â”œâ”€ date_logic: ë‚ ì§œ ë…¼ë¦¬ ê²€ì¦
   â”‚  â””â”€ cross_field: í•„ë“œ ê°„ ê²€ì¦
   â””â”€ ì˜¤ë¥˜ ëª©ë¡ ìƒì„±

4. ì‘ë‹µ ìƒì„±
   â”œâ”€ ValidationResponse
   â”‚  â”œâ”€ validation_status: PASS/FAIL
   â”‚  â”œâ”€ summary: í†µê³„ (ì´ í–‰, ì˜¤ë¥˜ í–‰, ì˜¤ë¥˜ ìˆ˜)
   â”‚  â”œâ”€ errors: ê°œë³„ ì˜¤ë¥˜ ëª©ë¡
   â”‚  â”œâ”€ conflicts: K-IFRS 1019 ì¶©ëŒ
   â”‚  â””â”€ rules_applied: ì ìš©ëœ ê·œì¹™ (ê°ì‚¬ì¶”ì ìš©)
   â””â”€ JSON ë°˜í™˜
```

---

## ğŸš€ ì„¤ì¹˜ ë° ì‹¤í–‰

### 1. ì‚¬ì „ ìš”êµ¬ì‚¬í•­

- Python 3.9 ì´ìƒ
- pip

### 2. ì„¤ì¹˜

```bash
cd dbo-validator/backend
pip install -r requirements.txt
```

### 3. ì„œë²„ ì‹¤í–‰

```bash
python main.py
```

ì„œë²„ê°€ `http://localhost:8000`ì—ì„œ ì‹¤í–‰ë©ë‹ˆë‹¤.

### 4. ì›¹ UI ì ‘ì†

ë¸Œë¼ìš°ì €ì—ì„œ `http://localhost:8000`ì„ ì—´ê±°ë‚˜,  
`frontend/index.html`ì„ ë¸Œë¼ìš°ì €ì—ì„œ ì§ì ‘ ì—´ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

## ğŸ“‹ API ì‚¬ìš© ì˜ˆì‹œ

### POST /validate

**ìš”ì²­**:
```bash
curl -X POST "http://localhost:8000/validate" \
  -F "employee_file=@employees.xlsx" \
  -F "rules_file=@validation_rules.xlsx"
```

**ì‘ë‹µ ì˜ˆì‹œ**:
```json
{
  "validation_status": "FAIL",
  "summary": {
    "total_rows": 1250,
    "valid_rows": 1180,
    "error_rows": 70,
    "total_errors": 95,
    "rules_applied": 12,
    "timestamp": "2025-01-12T10:30:00Z"
  },
  "errors": [
    {
      "row": 15,
      "column": "birth_date",
      "rule_id": "RULE_003",
      "message": "ìƒë…„ì›”ì¼ í˜•ì‹ì´ ì˜ëª»ë˜ì—ˆìŠµë‹ˆë‹¤. YYYYMMDD í˜•ì‹ì´ì–´ì•¼ í•©ë‹ˆë‹¤.",
      "actual_value": "1985-03-15",
      "expected": "YYYYMMDD",
      "source_rule": "ìƒë…„ì›”ì¼ì€ YYYYMMDD í˜•ì‹ìœ¼ë¡œ ì…ë ¥"
    }
  ],
  "conflicts": [
    {
      "rule_id": "RULE_008",
      "conflict_type": "kifrs_mismatch",
      "description": "Excel Bì—ì„œ '60ì„¸ ì´ìƒì€ ì œì™¸'ë¼ê³  ëª…ì‹œí–ˆìœ¼ë‚˜, K-IFRS 1019ëŠ” ëª¨ë“  ì¬ì§ ì¤‘ì¸ ì„ì§ì›ì„ í¬í•¨í•´ì•¼ í•¨",
      "kifrs_reference": "K-IFRS 1019 ë¬¸ë‹¨ 28-31",
      "recommendation": "K-IFRS 1019 ê¸°ì¤€ì„ ë”°ë¥´ê±°ë‚˜, íšŒê³„ë²•ì¸ê³¼ í˜‘ì˜ í•„ìš”",
      "severity": "high"
    }
  ]
}
```

---

## ğŸ” AI ì—­í• ì˜ ì—„ê²©í•œ ë¶„ë¦¬

### AIê°€ í•˜ëŠ” ê²ƒ (ai_layer.py)

âœ… ìì—°ì–´ ê·œì¹™ â†’ JSON ë³€í™˜  
âœ… ê·œì¹™ ê°„ ì¶©ëŒ ê°ì§€  
âœ… K-IFRS 1019ì™€ì˜ ì¶©ëŒ ê°ì§€  
âœ… í•´ì„ ê·¼ê±° ì œê³µ

### AIê°€ í•˜ì§€ ì•ŠëŠ” ê²ƒ

âŒ ì§ì ‘ ë°ì´í„° ê²€ì¦  
âŒ ì„ì˜ì˜ íšŒê³„ íŒë‹¨  
âŒ ë¹„ê²°ì •ë¡ ì  ê²€ì¦ ê²°ê³¼ ìƒì„±

### ê²°ì •ë¡ ì  ì—”ì§„ (rule_engine.py)

âœ… AIê°€ ë§Œë“  ê·œì¹™ì„ 100% ê²°ì •ë¡ ì ìœ¼ë¡œ ì‹¤í–‰  
âœ… ë™ì¼ ì…ë ¥ â†’ ë™ì¼ ì¶œë ¥ ë³´ì¥  
âœ… ê°ì‚¬ ì¶”ì  ê°€ëŠ¥

---

## ğŸ“Š Excel íŒŒì¼ í˜•ì‹

### Excel A (ì§ì› ë°ì´í„°)

| employee_id | birth_date | hire_date | gender | salary |
|-------------|------------|-----------|--------|--------|
| E001        | 19850315   | 20100101  | M      | 50000  |
| E002        | 19900520   | 20150601  | F      | 55000  |

### Excel B (ê²€ì¦ ê·œì¹™)

| field_name   | rule_text                                    |
|--------------|----------------------------------------------|
| employee_id  | ì‚¬ë²ˆ: ê³µë°± ì—†ìŒ, ì¤‘ë³µ ì—†ìŒ                   |
| birth_date   | ìƒë…„ì›”ì¼ì€ YYYYMMDD í˜•ì‹                     |
| birth_date   | ìƒë…„ì›”ì¼ì€ 1920ë…„ ì´í›„, 2007ë…„ ì´ì „          |
| hire_date    | ì…ì‚¬ì¼ì€ ìƒë…„ì›”ì¼ë³´ë‹¤ ì´í›„, ìµœì†Œ ë§Œ 15ì„¸     |
| gender       | ì„±ë³„: M, F, ë‚¨, ì—¬ë§Œ í—ˆìš©                    |

---

## ğŸ” ê·œì¹™ íƒ€ì…

| íƒ€ì…          | ì„¤ëª…                    | íŒŒë¼ë¯¸í„° ì˜ˆì‹œ                                      |
|---------------|-------------------------|---------------------------------------------------|
| required      | í•„ìˆ˜ í•„ë“œ               | `{}`                                              |
| no_duplicates | ì¤‘ë³µ ê¸ˆì§€               | `{}`                                              |
| format        | í˜•ì‹ ê²€ì¦               | `{"format": "YYYYMMDD"}` ë˜ëŠ” `{"regex": "..."}`  |
| range         | ë²”ìœ„ ê²€ì¦               | `{"min_value": 0, "max_value": 150}`              |
| date_logic    | ë‚ ì§œ ë…¼ë¦¬ ê²€ì¦          | `{"compare_field": "birth_date", "operator": ">"}` |
| cross_field   | í•„ë“œ ê°„ êµì°¨ ê²€ì¦       | `{"reference_field": "salary", "condition": "..."}` |
| custom        | ì‚¬ìš©ì ì •ì˜ ê²€ì¦        | `{"expression": "age >= 18 and age <= 65"}`       |

---

## ğŸ“š K-IFRS 1019 ì°¸ì¡°

ì‹œìŠ¤í…œì€ ë‹¤ìŒ K-IFRS 1019 ì¡°í•­ì„ ìë™ìœ¼ë¡œ ì°¸ì¡°í•©ë‹ˆë‹¤:

- **ë¬¸ë‹¨ 28-31**: í™•ì •ê¸‰ì—¬ì œë„ì˜ ê¸‰ì—¬ ëŒ€ìƒ ì§ì› ë²”ìœ„
- **ë¬¸ë‹¨ 57-59**: ë³´ê³ ê¸°ê°„ ë§ í˜„ì¬ ì¸¡ì •
- **ë¬¸ë‹¨ 75-98**: ë³´í—˜ìˆ˜ë¦¬ì  ê°€ì •
- **ì‹¤ë¬´ ìš”êµ¬ì‚¬í•­**: DBO ê³„ì‚°ì„ ìœ„í•œ ì§ì› ë°ì´í„° ìš”êµ¬ì‚¬í•­

---

## ğŸ›¡ï¸ ë³´ì•ˆ ë° í”„ë¼ì´ë²„ì‹œ

- âœ… ì—…ë¡œë“œëœ íŒŒì¼ì€ ë©”ëª¨ë¦¬ì—ì„œë§Œ ì²˜ë¦¬ (ë””ìŠ¤í¬ ì €ì¥ ì—†ìŒ)
- âœ… AI API í˜¸ì¶œ ì‹œ ë°ì´í„°ëŠ” Anthropicì˜ ê°œì¸ì •ë³´ ë³´í˜¸ì •ì±…ì„ ë”°ë¦„
- âœ… HTTPS ì‚¬ìš© ê¶Œì¥ (í”„ë¡œë•ì…˜)
- âš ï¸ ë¯¼ê°í•œ ê°œì¸ì •ë³´ëŠ” ìµëª…í™” ê¶Œì¥

---

## ğŸ“ í–¥í›„ ê°œì„ ì‚¬í•­

- [ ] ë°°ì¹˜ ê²€ì¦ (ì—¬ëŸ¬ íŒŒì¼ ë™ì‹œ ì²˜ë¦¬)
- [ ] ê²€ì¦ íˆìŠ¤í† ë¦¬ ì €ì¥
- [ ] ì‚¬ìš©ì ì •ì˜ K-IFRS ì°¸ì¡° ì¶”ê°€
- [ ] ë‹¤êµ­ì–´ ì§€ì› (ì˜ì–´, ì¼ë³¸ì–´)
- [ ] ê²€ì¦ ê²°ê³¼ Excel ë‚´ë³´ë‚´ê¸°
- [ ] ì‹¤ì‹œê°„ ì§„í–‰ìƒí™© í‘œì‹œ

---

## ğŸ‘¥ ê¸°ì—¬

ì´ ì‹œìŠ¤í…œì€ ì¤‘ì•™ì€í–‰ êµìœ¡í›ˆë ¨ ë¶€ì„œì—ì„œ ê°œë°œë˜ì—ˆìœ¼ë©°,  
ë³´í—˜ê³„ë¦¬ë²•ì¸ê³¼ íšŒê³„ë²•ì¸ì˜ í˜‘ë ¥ìœ¼ë¡œ K-IFRS 1019 ì¤€ìˆ˜ë¥¼ ê²€ì¦í•©ë‹ˆë‹¤.

---

## ğŸ“„ ë¼ì´ì„ ìŠ¤

ì´ í”„ë¡œì íŠ¸ëŠ” ë‚´ë¶€ ì‚¬ìš© ëª©ì ìœ¼ë¡œ ê°œë°œë˜ì—ˆìŠµë‹ˆë‹¤.

---

## ğŸ†˜ ë¬¸ì˜

ì‹œìŠ¤í…œ ê´€ë ¨ ë¬¸ì˜ì‚¬í•­ì€ ê°œë°œíŒ€ì—ê²Œ ì—°ë½í•˜ì„¸ìš”.

**ê°œë°œ**: Claude (Anthropic)  
**ì•„í‚¤í…ì²˜**: Jackie (ì¤‘ì•™ì€í–‰ êµìœ¡í›ˆë ¨ë¶€)
