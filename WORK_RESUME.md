# 작업 이력 및 계획

---

## 2026-01-17 작업 완료

### Phase 6: 규칙 관리 UI 개선

#### 새로운 기능
1. **규칙 파일 삭제 기능**
   - 규칙 파일 목록에 삭제 버튼 추가
   - `DELETE /rules/files/{file_id}` API 엔드포인트 추가
   - `RuleService.archive_rule_file()` 메서드 구현
   - 소프트 삭제(archived 상태로 변경) 방식

2. **개별 규칙 삭제 버튼**
   - 규칙 상세 페이지의 규칙 목록에 삭제 버튼 추가
   - 편집 버튼 옆에 휴지통 아이콘으로 hover 시 표시

3. **시트명 선택 드롭다운 개선**
   - 규칙 추가 모달에서 텍스트 입력 → 드롭다운 선택으로 변경
   - 기존 시트 목록에서 선택 가능
   - "+ 새 시트 추가" 옵션으로 커스텀 시트명 입력 지원

4. **중복 모달 제거**
   - 불필요하게 중복된 Create Rule Modal 제거

#### 버그 수정
- **HTML 구조 버그 수정 (Critical)**
  - `rules` 탭과 `ai_fix` 탭의 닫는 `</div>` 태그 누락
  - 이로 인해 `rule_detail` 탭이 부모 탭 안에 중첩되어 숨겨지는 문제 해결
  - 탭 전환 시 화면이 비어 보이던 문제 완전 해결

#### 수정된 파일
- `index.html` - UI 개선 및 HTML 구조 수정
- `backend/main.py` - 규칙 파일 삭제 API 추가
- `backend/services/rule_service.py` - archive_rule_file 메서드 추가

---

## 2026-01-17 다음 작업 계획

### 핵심 목표: AI 기반 규칙 관리와 데이터 검증 연계

**"사용자가 관리한 규칙으로 데이터가 정확히 검증되고, AI가 적절히 판단하여 수정하는가?"**

#### 1. 규칙-검증 연계 테스트
- 수동 추가/수정된 규칙이 `ValidationService`에서 정상 로드되는지 확인
- DB 규칙 조건과 AI 해석 파라미터가 파서에 올바르게 전달되는지 검증

#### 2. AI 수정 제안 정확도 검증
- AI가 오류를 분석하여 적절한 수정 제안을 생성하는지 테스트
- 수정 제안 적용 후 재검증 시 오류가 해결되는지 확인

#### 3. 워크플로우 개선
- 규칙 수정 → 즉시 재검증 흐름 마련
- 검증 결과에서 바로 규칙 등록/수정 가능한 연결 고리

---

## 이전 작업 이력

### 2026-01-16 (Phase 5)
- 오류 항목 일괄 수정 기능 구현
- UI/UX 구조 대폭 개선 (탭 기반 인터페이스)
- 수정 파일 다운로드 시 원본 서식 보존 (.xlsx)

### 2026-01-15 이전 (Phase 1-4)
- Supabase DB 인프라 구축
- 규칙 편집기 구현
- 다중 시트 검증 지원
- AI 규칙 해석 엔진 구현

---
작성: 2026-01-17 (Claude Code Agent)
