  1. 전체 아키텍처 (Layered Architecture)
  이 시스템은 K-IFRS 1019(퇴직급여채무) DBO 검증을 위한 자동화 플랫폼으로, 계층화된 구조를 가지고 있습니다.
   * Presentation Layer: index.html 기반의 경량화된 SPA (Alpine.js 사용).
   * API Layer: FastAPI 기반의 RESTful API 서버 (backend/main.py).
   * Service Layer: 도메인별로 분리된 서비스들 (validation, rule, learning, fix, feedback 등).
   * Data Layer: Supabase (PostgreSQL)를 사용한 데이터 영속화 및 Repository 패턴 적용.


  2. 핵심 로직: 하이브리드 검증 엔진
  이 프로젝트의 가장 큰 특징은 AI와 확정적(Deterministic) 로직의 결합입니다.
   * AI Interpretation (`ai_layer.py`): OpenAI, Anthropic, Gemini 등 멀티 LLM을 활용하여 자연어로 된 엑셀 검증 규칙을
     구조화된 JSON 형태로 변환합니다. (클라우드 AI 장애 시 Regex 기반 로컬 파서가 폴백으로 작동)
   * Rule Engine (`rule_engine.py`): 변환된 규칙을 바탕으로 Pandas를 사용하여 대량의 엑셀 데이터를 정밀하게 검증합니다.
     K-IFRS 1019 특화 로직(할인율 범위, 입사일 논리, 임금 이상치 검사 등)이 포함되어 있습니다.


  3. 학습 및 피드백 루프 (Learning System)
  시스템이 사용자의 수정 사항을 학습하여 점점 똑똑해지는 구조를 갖추고 있습니다.
   * Learning Service: 사용자의 피드백과 검증 성공률을 분석하여 learned_patterns 테이블에 저장합니다.
   * Smart Interpret: 축적된 패턴을 바탕으로 향후 AI가 규칙을 더 정확하게 해석하도록 돕습니다.
   * Smart Fix: 발견된 오류에 대해 과거 수정 이력과 데이터 타입을 기반으로 AI가 최적의 수정안을 제안합니다.


  4. 주요 기술 스택
   * Language: Python 3.x
   * Web Framework: FastAPI
   * Data Processing: Pandas (엑셀 분석 및 규칙 실행)
   * Database: Supabase (PostgreSQL), supabase-py 클라이언트
   * AI SDKs: openai, anthropic, google-generativeai
   * Infrastructure: Docker, Docker Compose


  요약하자면, "LLM을 통해 비정형 규칙을 정형화하고, 이를 고성능 데이터 프레임 엔진(Pandas)으로 실행하며, 사용자 피드백을
  통해 지속적으로 고도화되는 지능형 검증 시스템"이라고 할 수 있습니다.